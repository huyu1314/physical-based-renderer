cmake_minimum_required(VERSION 3.0)

project(AwesomeRenderer)

option(GLFW_BUILD_DOCS OFF)
option(GLFW_BUILD_EXAMPLES OFF)
option(GLFW_BUILD_TESTS OFF)

option(ASSIMP_BUILD_ASSIMP_TOOLS OFF)
option(ASSIMP_BUILD_SAMPLES OFF)
option(ASSIMP_BUILD_TESTS OFF)

set(CMAKE_CXX_STANDARD 14)
set(CMAKE_CXX_STANDARD_REQUIRED ON)
set(CMAKE_CXX_EXTENSIONS OFF)

set(CMAKE_MODULE_PATH ${CMAKE_MODULE_PATH} "${CMAKE_SOURCE_DIR}/cmake")


include(macros)
include(modules/sanitizers_support)
include(modules/clang_tidy_support)
include(modules/add_ide_support)

detect_platform()
print_info()
set_output_paths()

add_subdirectory_ex(3rdpart)

include_directories(3rdpart/glad/include)

FILE(GLOB imgui
src/imgui/*.h
src/imgui/*.cpp
)

FILE(GLOB mesh
src/mesh/*.h
)

FILE(GLOB ray_tracing
src/ray_tracing/*.h
src/ray_tracing/*.cpp
)

# SET(GL 
# FILE(GLOB GL
# src/GL/*.c
# src/GL/*.h
# )

SET(renderer
src/renderer/the_renderer.h
src/renderer/the_renderer.cpp
)

FILE(GLOB ray_tracing_in_one_weekend
src/ray_tracing_in_one_weekend/*.h
src/ray_tracing_in_one_weekend/*.cpp
src/ray_tracing_in_one_weekend/*.hpp
)

add_executable(AwesomeRenderer
${imgui}
${mesh}
${ray_tracing}
${renderer}
${GL}
${ray_tracing_in_one_weekend}
3rdpart/glad/src/glad.c
src/imgui_impl_glfw_gl3.cpp
src/imgui_impl_glfw_gl3.h
src/main.cpp
)

target_link_libraries(AwesomeRenderer glfw)
target_link_libraries(AwesomeRenderer assimp)

link_directories(${AwesomeRenderer_SOURCE_DIR})